#pylint: disable=C0301

from bot import coder

SAMPLE_MESSAGE = '000000000000000000000000c1912fee45d61c87cc5ea59dae31190fffff232d00000000000000000000000000000000000000000000000000000000000001c800000000000000000000000000000000000000000000000000000000000000020000000000000000000000005291fA3F70C8e3D21B58c831018E5a0D82Dc4ab90000000000000000000000009552ceb4e6fa8c356c1a76a8bc8b1efa7b9fb205000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006a94d74f430000000000000000000000000000000000000000000000000000006a94d74f4300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002386f26fc10000'
SAMPLE_NONCE = 456
SAMPLE_PLAYER_A = '5291fa3f70c8e3d21b58c831018e5a0d82dc4ab9'
SAMPLE_PLAYER_B = '9552ceb4e6fa8c356c1a76a8bc8b1efa7b9fb205'
SAMPLE_TYPE = 'c1912fee45d61c87cc5ea59dae31190fffff232d'

INCREMENT_TURN_NUM_MESSAGE = "000000000000000000000000c1912fee45d61c87cc5ea59dae31190fffff232d00000000000000000000000000000000000000000000000000000000000001c800000000000000000000000000000000000000000000000000000000000000020000000000000000000000005291fA3F70C8e3D21B58c831018E5a0D82Dc4ab90000000000000000000000009552ceb4e6fa8c356c1a76a8bc8b1efa7b9fb205000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006a94d74f430000000000000000000000000000000000000000000000000000006a94d74f4300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002386f26fc10000"


def test_channel_attributes():
    nonce = coder.get_channel_nonce(SAMPLE_MESSAGE)
    assert nonce == SAMPLE_NONCE

    players = coder.get_channel_players(SAMPLE_MESSAGE)
    assert players[0] == SAMPLE_PLAYER_A
    assert players[1] == SAMPLE_PLAYER_B

    channel_type = coder.get_channel_type(SAMPLE_MESSAGE)
    assert channel_type == SAMPLE_TYPE

    state = coder.get_channel_state(SAMPLE_MESSAGE)
    assert state == 0


def test_state_attributes():
    turn_num = coder.get_state_turn_num(SAMPLE_MESSAGE)
    assert turn_num == 0


def test_int_to_field():
    num = 16
    h_num = coder.int_to_field(num)
    assert h_num == '0000000000000000000000000000000000000000000000000000000000000010'


def test_increment_state_turn_num():
    response_message = coder.increment_state_turn_num(SAMPLE_MESSAGE)
    assert response_message == INCREMENT_TURN_NUM_MESSAGE


def test_get_channel_id():
    channel_id = coder.get_channel_id(SAMPLE_MESSAGE)
    assert channel_id == '0xe1a3ac931506acf34311b820d15480b077db033fa85efdae289de42730b6554a'
